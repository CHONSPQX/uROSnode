<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Copyright (c) 2012, Politecnico di Milano. All rights reserved.
Andrea Zoppi <texzk@email.it>
Martino Migliavacca <martino.migliavacca@gmail.com>
http://airlab.elet.polimi.it/
http://www.openrobots.com/
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Î¼ROSnode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png" width="125" height="50"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname"><span id="projectnumber">0.1.0</span></div>
   <div id="projectbrief">alpha</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('uros_threading_8c_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">urosThreading.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="uros_threading_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">Copyright (c) 2012, Politecnico di Milano. All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">Andrea Zoppi &lt;texzk@email.it&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">Martino Migliavacca &lt;martino.migliavacca@gmail.com&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">http://airlab.elet.polimi.it/</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">http://www.openrobots.com/</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">modification, are permitted provided that the following conditions are met:</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">1. Redistributions of source code must retain the above copyright notice, this</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">2. Redistributions in binary form must reproduce the above copyright notice,</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">   this list of conditions and the following disclaimer in the documentation</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">   and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * @file    urosThreading.c</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * @author  Andrea Zoppi &lt;texzk@email.it&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * @brief   Threading features of the middleware.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/*===========================================================================*/</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/* HEADER FILES                                                              */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*===========================================================================*/</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;../include/urosBase.h&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;../include/urosUser.h&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;../include/urosThreading.h&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;../include/lld/uros_lld_threading.h&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/*===========================================================================*/</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/* LOCAL TYPES &amp; MACROS                                                      */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/*===========================================================================*/</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#if UROS_THREADING_C_USE_ASSERT == UROS_FALSE &amp;&amp; !defined(__DOXYGEN__)</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#undef urosAssert</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define urosAssert(expr)</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/*===========================================================================*/</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/* GLOBAL FUNCTIONS                                                          */</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/*===========================================================================*/</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/** @addtogroup threading_funcs */</span><span class="comment"></span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/** @{ */</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/*~~~ SEMAPHORE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">/** @name Semaphore */</span><span class="comment"></span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/** @{ */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> * @brief   Initializes a semaphore.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> * @details The semaphore object is initialized, and an initial count is</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> *          assigned.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> * @pre     The semaphore is not initialized.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> * @param[in,out] semp</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> *          Pointer to an allocated @p UrosSem object.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> * @param n</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> *          Initial semaphore count.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga4eb60f6221e8953b65eaf68bd1e3af0c">   80</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga4eb60f6221e8953b65eaf68bd1e3af0c" title="Initializes a semaphore.">urosSemObjectInit</a>(<a class="code" href="group__threading__types.html#ga52e67bef3a160b15bd4a257e2b104ccb" title="Semaphore type, platform-dependent.">UrosSem</a> *semp, <a class="code" href="group__base__types.html#gae23a3c699ffa61c5f51e39476342f720" title="Unsigned counter data type.">uros_cnt_t</a> n) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga6ec5f1be51d9c99962fe4bcdafd5f581" title="Initializes a semaphore.">uros_lld_sem_objectinit</a>(semp, n);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> * @brief   Cleans a semaphore.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> * @details Deallocates any memory chunks allocated by the object itself.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> * @pre     The semaphore is initialized.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> * @post    The semaphore is not initialized, call @p urosSemObjectInit() to</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> *          use it again.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> * @param[in,out] semp</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosSem object.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga86abddf010749514d02302c5c7e1651f">   96</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga86abddf010749514d02302c5c7e1651f" title="Cleans a semaphore.">urosSemClean</a>(<a class="code" href="group__threading__types.html#ga52e67bef3a160b15bd4a257e2b104ccb" title="Semaphore type, platform-dependent.">UrosSem</a> *semp) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga9c6a813e3cac5103f927bab1c538b624" title="Cleans a semaphore.">uros_lld_sem_clean</a>(semp);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> * @brief   Waits for a semaphore signal.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> * @details Waits until the semaphore counter is positive. When positive, it</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> *          is decremented and the procedure returns the control to the caller.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * @note    Depending on the low-level implementation, it may support a</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> *          &lt;i&gt;priority inversion&lt;/i&gt; mechanism.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> * @param[in,out] semp</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosSem object.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga29f8a130d72ad2ef758de67130cb7ef4">  111</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga29f8a130d72ad2ef758de67130cb7ef4" title="Waits for a semaphore signal.">urosSemWait</a>(<a class="code" href="group__threading__types.html#ga52e67bef3a160b15bd4a257e2b104ccb" title="Semaphore type, platform-dependent.">UrosSem</a> *semp) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga585619ed1521a0a1f34cc0f784c4476e" title="Waits for a semaphore signal.">uros_lld_sem_wait</a>(semp);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> * @brief   Semaphore signal.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> * @details Increments a semaphore counter.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> * @param[in,out] semp</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosSem object.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga8e7ea9c980c216b49bd2bc0be9d0c9c5">  123</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga8e7ea9c980c216b49bd2bc0be9d0c9c5" title="Semaphore signal.">urosSemSignal</a>(<a class="code" href="group__threading__types.html#ga52e67bef3a160b15bd4a257e2b104ccb" title="Semaphore type, platform-dependent.">UrosSem</a> *semp) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga154fcc768984fd9447724c640291b605" title="Semaphore signal.">uros_lld_sem_signal</a>(semp);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> * @brief   Gets the semaphore value.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> * @details Reads the current semaphore value.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> * @warning Thread-safe, but the value may not be consistent after a call to</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> *          this function.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> * @param[in] semp</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosSem object.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> *          Current semaphore count.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga135e579e309200482d85545af3b52f29">  139</a></span>&#160;<a class="code" href="group__base__types.html#gae23a3c699ffa61c5f51e39476342f720" title="Unsigned counter data type.">uros_cnt_t</a> <a class="code" href="group__threading__funcs.html#ga135e579e309200482d85545af3b52f29" title="Gets the semaphore value.">urosSemValue</a>(<a class="code" href="group__threading__types.html#ga52e67bef3a160b15bd4a257e2b104ccb" title="Semaphore type, platform-dependent.">UrosSem</a> *semp) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__threading__lld__funcs.html#ga02ba383bd474a0b98adabf9080c6f07f" title="Gets the semaphore value.">uros_lld_sem_value</a>(semp);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/** @} */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">/*~~~ MUTEX ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/** @name Mutex */</span><span class="comment"></span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/** @{ */</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> * @brief   Initializes a mutex.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> * @details The mutex object is initialized, and set as unlocked.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> * @pre     The mutex is not initialized.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> * @post    The mutex is unlocked.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> * @param[in,out] mtxp</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"> *          Pointer to an allocated @p UrosMutex object.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga37994e1b40b726a446c246de9ab8af6e">  161</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga37994e1b40b726a446c246de9ab8af6e" title="Initializes a mutex.">urosMutexObjectInit</a>(<a class="code" href="group__threading__types.html#ga9105641b55b49e541d8de312522e7506" title="Mutex type, platform-dependent.">UrosMutex</a> *mtxp) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga94b67916b44bcc53d901aa04e4c41085" title="Initializes a mutex.">uros_lld_mutex_objectinit</a>(mtxp);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"> * @brief   Cleans a mutex.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> * @details Deallocates any memory chunks allocated by the object itself.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> * @pre     The mutex is initialized.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> * @post    The mutex is not initialized, call @p urosMutexObjectInit() to</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> *          use it again.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> * @param[in,out] mtxp</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosMutex object.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gab6908a7228ced9708b3547945cd546a8">  177</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#gab6908a7228ced9708b3547945cd546a8" title="Cleans a mutex.">urosMutexClean</a>(<a class="code" href="group__threading__types.html#ga9105641b55b49e541d8de312522e7506" title="Mutex type, platform-dependent.">UrosMutex</a> *mtxp) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga743fe8aa0460aeb545b77c9a4d7c81a7" title="Cleans a mutex.">uros_lld_mutex_clean</a>(mtxp);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"> * @brief   Locks a mutex.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"> * @details Tries to lock a mutex. If the mutex is already locked, it waits</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> *          until it is unlocked.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> * @note    Depending on the low-level implementation, it may support a</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> *          &lt;i&gt;priority inversion&lt;/i&gt; mechanism.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> * @post    The mutex is locked.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> * @param[in,out] mtxp</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosMutex object.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83">  194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(<a class="code" href="group__threading__types.html#ga9105641b55b49e541d8de312522e7506" title="Mutex type, platform-dependent.">UrosMutex</a> *mtxp) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga3d1782a58820716535c2b1328999d882" title="Locks a mutex.">uros_lld_mutex_lock</a>(mtxp);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * @brief   Unlocks a mutex.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> * @pre     The mutex is locked.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> * @post    The mutex is unlocked.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> * @param[in,out] mtxp</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"> *          Pointer to a locked @p UrosMutex object.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3">  208</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(<a class="code" href="group__threading__types.html#ga9105641b55b49e541d8de312522e7506" title="Mutex type, platform-dependent.">UrosMutex</a> *mtxp) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#gab2a24cbd59df48ebad27e5d7c32fc416" title="Unlocks a mutex.">uros_lld_mutex_unlock</a>(mtxp);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/** @} */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/*~~~ CONDITION VARIABLE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/** @name Condition variable */</span><span class="comment"></span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/** @{ */</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"> * @brief   Initializes a condvar.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"> * @pre     The condvar is not initialized.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"> * @post    The condvar is initialized.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> * @param[in,out] cvp</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"> *          Pointer to an allocated @p UrosCondVar object.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga3534e53abf5b3e3dedaa298e6611ce25">  229</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga3534e53abf5b3e3dedaa298e6611ce25" title="Initializes a condvar.">urosCondVarObjectInit</a>(<a class="code" href="group__threading__types.html#gad61552b0c59dbaaa80b704838f5f71a0" title="Condvar type, platform-dependent.">UrosCondVar</a> *cvp) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga2144e6c41a66f0b06105c116537e342a" title="Initializes a condvar.">uros_lld_condvar_objectinit</a>(cvp);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"> * @brief   Cleans a condvar.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"> * @details Deallocates any memory chunks allocated by the object itself.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"> * @pre     The condvar is initialized.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"> * @post    The condvar is not initialized, call @p urosConvVarObjectInit() to</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"> *          use it again.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"> * @param[in,out] cvp</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosCondVar object.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gab0c66c91215c99a4a60d0f6aceada223">  245</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#gab0c66c91215c99a4a60d0f6aceada223" title="Cleans a condvar.">urosCondVarClean</a>(<a class="code" href="group__threading__types.html#gad61552b0c59dbaaa80b704838f5f71a0" title="Condvar type, platform-dependent.">UrosCondVar</a> *cvp) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga281663fafe8e9f243bd36a6a9ae61d72" title="Cleans a condvar.">uros_lld_condvar_clean</a>(cvp);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"> * @brief   Waits for a condvar signal.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"> * @details Waits until the condvar is signalled.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"> * @note    This procedure must be called within a lock zone guarded by a</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"> *          mutex, shared by the waiting and the signalling thread.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"> * @param[in,out] cvp</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosCondVar object.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"> * @param[in,out] mtxp</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"> *          Pointer to the mutex guarding this condvar.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gac41b7ff0ff65ddf278270d5c37c647f6">  261</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#gac41b7ff0ff65ddf278270d5c37c647f6" title="Waits for a condvar signal.">urosCondVarWait</a>(<a class="code" href="group__threading__types.html#gad61552b0c59dbaaa80b704838f5f71a0" title="Condvar type, platform-dependent.">UrosCondVar</a> *cvp, <a class="code" href="group__threading__types.html#ga9105641b55b49e541d8de312522e7506" title="Mutex type, platform-dependent.">UrosMutex</a> *mtxp) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#gaba27bbec5b129ecdd3e56da3d2147807" title="Waits for a condvar signal.">uros_lld_condvar_wait</a>(cvp, mtxp);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"> * @brief   Single condvar signal.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"> * @details Signals a condvar to a single waiting thread.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"> * @note    This procedure may be called within a lock zone guarded by a mutex,</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"> *          shared by the waiting and the signalling thread.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"> * @param[in,out] cvp</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosCondVar object.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gab5d4fcbed1f9cc5b5beca8e43425863e">  275</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#gab5d4fcbed1f9cc5b5beca8e43425863e" title="Single condvar signal.">urosCondVarSignal</a>(<a class="code" href="group__threading__types.html#gad61552b0c59dbaaa80b704838f5f71a0" title="Condvar type, platform-dependent.">UrosCondVar</a> *cvp) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga640a4fbc46d9e67597b2e5898f90375f" title="Single condvar signal.">uros_lld_condvar_signal</a>(cvp);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> * @brief   Broadcast condvar signal.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> * @details Signals a condvar to all of the waiting threads.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> * @note    This procedure may be called within a lock zone guarded by a mutex,</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> *          shared by the waiting and the signalling thread.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> * @param[in,out] cvp</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosCondVar object.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga41671e7fb2edd6a4233a6bc7cb01d9cf">  289</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga41671e7fb2edd6a4233a6bc7cb01d9cf" title="Broadcast condvar signal.">urosCondVarBroadcast</a>(<a class="code" href="group__threading__types.html#gad61552b0c59dbaaa80b704838f5f71a0" title="Condvar type, platform-dependent.">UrosCondVar</a> *cvp) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="group__threading__lld__funcs.html#ga1389d27e9f5788d0e332f81e6931e119" title="Broadcast condvar signal.">uros_lld_condvar_broadcast</a>(cvp);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">/** @} */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">/*~~~ THREAD POOL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">/** @name Thread pool */</span><span class="comment"></span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">/** @{ */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"> * @brief   Initializes a thread pool</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> * @details The thread pool is initialized with the related attributes, and any</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"> *          private members.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> * @pre     The thread pool is not initialized.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"> * @param[in,out] poolp</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"> *          Pointer to an allocated @p UrosThreadPool object.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"> * @param[in] stackpoolp</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"> *          Pointer to an initialized memory pool.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"> * @param[in] routine</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"> *          Routine of the worker threads.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"> * @param[in] namep</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"> *          Pointer to the default thread name, valid for the whole the thread</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"> *          life. Null-terminated string.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> * @param[in] priority</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> *          Default worker thread priority.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gaf5bcef4a97d45aeb65b10c8c6d2c3ee0">  322</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#gaf5bcef4a97d45aeb65b10c8c6d2c3ee0" title="Initializes a thread pool.">urosThreadPoolObjectInit</a>(<a class="code" href="struct_uros_thread_pool.html" title="Thread pool object.">UrosThreadPool</a> *poolp,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                    <a class="code" href="struct_uros_mem_pool.html" title="Built-in memory pool object.">UrosMemPool</a> *stackpoolp,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                    <a class="code" href="group__base__types.html#ga7f1ff17e59a50f61ce7e3c18fdae5306" title="One-parameter procedure function pointer.">uros_proc_f</a> routine,</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span> *namep,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                    <a class="code" href="group__threading__types.html#gabd3923d9ae9b7e8cc12dd6a3387bc736" title="Thread priority type, platform-dependent.">uros_prio_t</a> priority) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp != NULL);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(stackpoolp != NULL);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(routine != NULL);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#aa10cafef15513666b33b1157556c060d" title="Memory pool for thread stacks.">stackPoolp</a> = stackpoolp;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a> = <a class="code" href="group__base__funcs.html#ga35f1453e305af432b4190ed25c08734b" title="Gets the number of free memory pool blocks.">urosMemPoolNumFree</a>(stackpoolp);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a> &gt; 0);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a8684a8ee4b6ca653d75e0a8e8ec4dbfa" title="Next thread argument pointer.">argp</a> = NULL;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a61fb2abf9a09163872b52d471bfe9025" title="User routine for children.">routine</a> = routine;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#ab72fc20e7e80395044adda40a42b4b60" title="Default thread name.">namep</a> = namep;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a87e2092b57bf1c555cdf556de9a48cc3" title="Default thread priority.">priority</a> = priority;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a75de9ba4f00eebf833996c34f50f136e" title="Thread identifier array.">threadsp</a> = <a class="code" href="group__base__funcs.html#gaca31660467115b07820c90fd9f282d67" title="Allocates a memory block.">urosAlloc</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a> * <a class="code" href="group__base__funcs.html#ga8068ca183012a7c169c44d2ca558bfbc" title="Gets the memory pool block size.">urosMemPoolBlockSize</a>(stackpoolp));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a> = 0;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a1c53f4dd5f75121cde9f69b1e7c67340" title="Busy threads counter.">busyCnt</a> = 0;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="group__threading__funcs.html#ga37994e1b40b726a446c246de9ab8af6e" title="Initializes a mutex.">urosMutexObjectInit</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="group__threading__funcs.html#ga37994e1b40b726a446c246de9ab8af6e" title="Initializes a mutex.">urosMutexObjectInit</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="group__threading__funcs.html#ga3534e53abf5b3e3dedaa298e6611ce25" title="Initializes a condvar.">urosCondVarObjectInit</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="group__threading__funcs.html#ga3534e53abf5b3e3dedaa298e6611ce25" title="Initializes a condvar.">urosCondVarObjectInit</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a0609be4df2d934d5cc830b96052d056a" title="Busy threads condvar.">busyCond</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a67ab049fb9e8d58ac84bb1453d41c2eb" title="Exit request flag, broadcast.">exitFlag</a> = <a class="code" href="group__base__macros.html#ga9e109897ade099aba061ded6ee7064e9" title="false boolean value.">UROS_FALSE</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">return</span> (poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a75de9ba4f00eebf833996c34f50f136e" title="Thread identifier array.">threadsp</a> != NULL) ? <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a> : <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6cad6877461eb507108e0b2d8d26608252c" title="Not enough free memory.">UROS_ERR_NOMEM</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"> * @brief   Cleans a thread pool.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> * @details Deinitializes private members, and deallocates any allocated</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> *          objects.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> * @note    The related memory pool is not deallocated nor uninitialized.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> * @pre     The thread pool is initialized.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"> * @pre     No worker thread is running.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"> * @post    The thread pool is not initialized, call @p urosThreadPoolObjectInit()</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment"> *          to use it again.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> * @param[in,out] poolp</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> *          Pointer to an initialized memory pool.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gac5bfbfd2ad200da8e4b78f8b49f22b74">  365</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#gac5bfbfd2ad200da8e4b78f8b49f22b74" title="Cleans a thread pool.">urosThreadPoolClean</a>(<a class="code" href="struct_uros_thread_pool.html" title="Thread pool object.">UrosThreadPool</a> *poolp) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp != NULL);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#aa10cafef15513666b33b1157556c060d" title="Memory pool for thread stacks.">stackPoolp</a> = NULL;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a> = 0;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a8684a8ee4b6ca653d75e0a8e8ec4dbfa" title="Next thread argument pointer.">argp</a> = NULL;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a61fb2abf9a09163872b52d471bfe9025" title="User routine for children.">routine</a> = NULL;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="group__base__funcs.html#gabf008f1631293a018e1d7be3ffbb5b51" title="Deallocates a memory block.">urosFree</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a75de9ba4f00eebf833996c34f50f136e" title="Thread identifier array.">threadsp</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a> = 0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a1c53f4dd5f75121cde9f69b1e7c67340" title="Busy threads counter.">busyCnt</a> = 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <a class="code" href="group__threading__funcs.html#gab6908a7228ced9708b3547945cd546a8" title="Cleans a mutex.">urosMutexClean</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="group__threading__funcs.html#gab6908a7228ced9708b3547945cd546a8" title="Cleans a mutex.">urosMutexClean</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="group__threading__funcs.html#gab0c66c91215c99a4a60d0f6aceada223" title="Cleans a condvar.">urosCondVarClean</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="group__threading__funcs.html#gab0c66c91215c99a4a60d0f6aceada223" title="Cleans a condvar.">urosCondVarClean</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a0609be4df2d934d5cc830b96052d056a" title="Busy threads condvar.">busyCond</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a67ab049fb9e8d58ac84bb1453d41c2eb" title="Exit request flag, broadcast.">exitFlag</a> = <a class="code" href="group__base__macros.html#ga9e109897ade099aba061ded6ee7064e9" title="false boolean value.">UROS_FALSE</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"> * @brief   Creates all the thread pool threads.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> * @details The thread pool is filled with new worker threads. The fucntion</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"> *          waits until all the worker threads are ready.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> * @see     urosThreadPoolJoinAll()</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> * @see     urosThreadPoolClean()</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> * @pre     The thread pools has no allocated worker threads.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> * @post    All the worker threads are ready.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"> * @param[in,out] poolp</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosThreadPool object.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gab8d616e0bb75660a28be2c7189058626">  398</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#gab8d616e0bb75660a28be2c7189058626" title="Creates all the thread pool threads.">urosThreadPoolCreateAll</a>(<a class="code" href="struct_uros_thread_pool.html" title="Thread pool object.">UrosThreadPool</a> *poolp) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="group__base__types.html#gae23a3c699ffa61c5f51e39476342f720" title="Unsigned counter data type.">uros_cnt_t</a> i;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> err;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp != NULL);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#aa10cafef15513666b33b1157556c060d" title="Memory pool for thread stacks.">stackPoolp</a> != NULL);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a75de9ba4f00eebf833996c34f50f136e" title="Thread identifier array.">threadsp</a> != NULL);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a> &gt; 0);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">/* Create the threads from the memory pool.*/</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a67ab049fb9e8d58ac84bb1453d41c2eb" title="Exit request flag, broadcast.">exitFlag</a> = <a class="code" href="group__base__macros.html#ga9e109897ade099aba061ded6ee7064e9" title="false boolean value.">UROS_FALSE</a>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a>; ++i) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    err = <a class="code" href="group__threading__funcs.html#ga06b839f3199a979cbc5b64366506418e" title="Creates a thread allocating the stack from a memory pool.">urosThreadCreateFromMemPool</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a75de9ba4f00eebf833996c34f50f136e" title="Thread identifier array.">threadsp</a>[i], poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#ab72fc20e7e80395044adda40a42b4b60" title="Default thread name.">namep</a>,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                      poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a87e2092b57bf1c555cdf556de9a48cc3" title="Default thread priority.">priority</a>,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                      (<a class="code" href="group__base__types.html#ga7f1ff17e59a50f61ce7e3c18fdae5306" title="One-parameter procedure function pointer.">uros_proc_f</a>)<a class="code" href="group__threading__funcs.html#gad1f81a0176ce128c883320d346e5d9fe" title="Worker thread.">urosThreadPoolWorkerThread</a>,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                      (<span class="keywordtype">void</span>*)poolp, poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#aa10cafef15513666b33b1157556c060d" title="Memory pool for thread stacks.">stackPoolp</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(err != <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6cad6877461eb507108e0b2d8d26608252c" title="Not enough free memory.">UROS_ERR_NOMEM</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="group__base__macros.html#gae2617103c16f3e9d923d712289011471" title="Checks if an error occurred, and generates a message.">urosError</a>(err != <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>, <span class="keywordflow">return</span> err,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;              (<span class="stringliteral">&quot;Error [%s] while creating thread %d (of %d) in pool\n&quot;</span>,</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;               strerror(err), i, poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a>));</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">/* Wait until all the threads are ready.*/</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">while</span> (poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a> &lt; poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a>) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="group__threading__funcs.html#gac41b7ff0ff65ddf278270d5c37c647f6" title="Waits for a condvar signal.">urosCondVarWait</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>, &amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> * brief    Joins all the worker threads.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"> * @details Waits for all the worker threads to terminate.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"> * @see     urosThreadPoolClean()</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"> * @pre     The worker threads are created.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"> * @post    The worker threads have terminated and cannot be started again.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"> * @param[in,out] poolp</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosThreadPool object.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga661e9bd454c1eeeabc90d4846031489f">  443</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#ga661e9bd454c1eeeabc90d4846031489f">urosThreadPoolJoinAll</a>(<a class="code" href="struct_uros_thread_pool.html" title="Thread pool object.">UrosThreadPool</a> *poolp) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="group__base__types.html#gae23a3c699ffa61c5f51e39476342f720" title="Unsigned counter data type.">uros_cnt_t</a> i;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp != NULL);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#aa10cafef15513666b33b1157556c060d" title="Memory pool for thread stacks.">stackPoolp</a> != NULL);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">/* Wait for all the running threads to terminate.*/</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">while</span> (poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a> &lt; poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a>) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="group__threading__funcs.html#gac41b7ff0ff65ddf278270d5c37c647f6" title="Waits for a condvar signal.">urosCondVarWait</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>, &amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">/* Restart all the threads with the exit flag set.*/</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a67ab049fb9e8d58ac84bb1453d41c2eb" title="Exit request flag, broadcast.">exitFlag</a> = <a class="code" href="group__base__macros.html#gafe1e9e4dd81f26e3eeaca59d8416142e" title="true boolean value.">UROS_TRUE</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a1c53f4dd5f75121cde9f69b1e7c67340" title="Busy threads counter.">busyCnt</a> = poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="group__threading__funcs.html#ga41671e7fb2edd6a4233a6bc7cb01d9cf" title="Broadcast condvar signal.">urosCondVarBroadcast</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a0609be4df2d934d5cc830b96052d056a" title="Busy threads condvar.">busyCond</a>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">/* Wait until all the threads have exited.*/</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">while</span> (poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a> &lt; poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a>) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="group__threading__funcs.html#gac41b7ff0ff65ddf278270d5c37c647f6" title="Waits for a condvar signal.">urosCondVarWait</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>, &amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a45a12512c0997c9d538e4f49bdea8fd4" title="Thread pool size.">size</a>; ++i) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="group__threading__funcs.html#ga0d51472a699f6790707980c71370af4d" title="Joins a thread.">urosThreadJoin</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a75de9ba4f00eebf833996c34f50f136e" title="Thread identifier array.">threadsp</a>[i]);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"> * @brief   Starts a worker thread.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"> * @details Waits until there is a ready worker thread in the pool, selects it,</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"> *          passes the argument provided by the user to it, and lets it run.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"> * @pre     The worker threads are created.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"> * @post    The worker thread is running the routine assigne to the pool, with</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"> *          the argument provided by the user.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> * @param[in,out] poolp</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"> *          Pointer to an initialized @p UrosThreadPool object.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"> * @param[in] argp</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"> *          Argument passed to the thread routine.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gaeea85ae8f249cff2e9541a5aad289f9c">  492</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#gaeea85ae8f249cff2e9541a5aad289f9c" title="Starts a worker thread.">urosThreadPoolStartWorker</a>(<a class="code" href="struct_uros_thread_pool.html" title="Thread pool object.">UrosThreadPool</a> *poolp, <span class="keywordtype">void</span> *argp) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp != NULL);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#aa10cafef15513666b33b1157556c060d" title="Memory pool for thread stacks.">stackPoolp</a> != NULL);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">/* Wait for a free thread.*/</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordflow">while</span> (poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a> == 0) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="group__threading__funcs.html#gac41b7ff0ff65ddf278270d5c37c647f6" title="Waits for a condvar signal.">urosCondVarWait</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>, &amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  --poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">/* Start a thread with the given argument pointer.*/</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a8684a8ee4b6ca653d75e0a8e8ec4dbfa" title="Next thread argument pointer.">argp</a> = argp;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  ++poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a1c53f4dd5f75121cde9f69b1e7c67340" title="Busy threads counter.">busyCnt</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="group__threading__funcs.html#gab5d4fcbed1f9cc5b5beca8e43425863e" title="Single condvar signal.">urosCondVarSignal</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a0609be4df2d934d5cc830b96052d056a" title="Busy threads condvar.">busyCond</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"> * @brief   Worker thread.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment"> * @details This is the actual thread function created by @p urosThreadPoolCreateAll().</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"> *          After creation, it waits until the user starts this thread by</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"> *          calling @p urosThreadPoolStartWorker(), when this is the first</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"> *          ready thread selected.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"> *          After executing the routine defined with urosThreadPoolObjectInit(),</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"> *          this thread goes back into the waiting state.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"> *          To exit from this thread, it first has to be put back into the</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> *          waiting state. Then, the @p exitFlag of the pool must be set to</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"> *          @p true, so that by calling @p urosThreadPoolStartWorker() again</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"> *          on this thread, the latter knows it must exit and not execute the</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"> *          user routine.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> * @param[in] poolp</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"> *          Pointer to the @p UrosThreadPool which created this thread.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"> *          Error code returned by the user routine.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gad1f81a0176ce128c883320d346e5d9fe">  535</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#gad1f81a0176ce128c883320d346e5d9fe" title="Worker thread.">urosThreadPoolWorkerThread</a>(<a class="code" href="struct_uros_thread_pool.html" title="Thread pool object.">UrosThreadPool</a> *poolp) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <a class="code" href="group__base__types.html#ga054dde91f71050290ad158e45e684187" title="Boolean data type.">uros_bool_t</a> exit;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> err;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordtype">void</span> *argp;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp != NULL);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a61fb2abf9a09163872b52d471bfe9025" title="User routine for children.">routine</a> != NULL);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="comment">/* Notify the creation of a thread.*/</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  ++poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="group__threading__funcs.html#gab5d4fcbed1f9cc5b5beca8e43425863e" title="Single condvar signal.">urosCondVarSignal</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">/* Wait for the user routine to start with the provided argument pointer.*/</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">while</span> (poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a1c53f4dd5f75121cde9f69b1e7c67340" title="Busy threads counter.">busyCnt</a> == 0) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="group__threading__funcs.html#gac41b7ff0ff65ddf278270d5c37c647f6" title="Waits for a condvar signal.">urosCondVarWait</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a0609be4df2d934d5cc830b96052d056a" title="Busy threads condvar.">busyCond</a>, &amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    --poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a1c53f4dd5f75121cde9f69b1e7c67340" title="Busy threads counter.">busyCnt</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    argp = poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a8684a8ee4b6ca653d75e0a8e8ec4dbfa" title="Next thread argument pointer.">argp</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    exit = poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a67ab049fb9e8d58ac84bb1453d41c2eb" title="Exit request flag, broadcast.">exitFlag</a>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9ed136f7075f7302c480990c50ff13b8" title="Busy threads mutex.">busyMtx</a>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (!exit) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="comment">/* Launch the wrapped user thread routine.*/</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="group__base__macros.html#ga54eab9e05e9149628d6950a87eb8b6f8" title="Evaluates an assertion.">urosAssert</a>(poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a61fb2abf9a09163872b52d471bfe9025" title="User routine for children.">routine</a> != NULL);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      err = poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a61fb2abf9a09163872b52d471bfe9025" title="User routine for children.">routine</a>(argp);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      err = <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">/* Notify the release of this thread.*/</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="group__threading__funcs.html#ga1db2c55616b4b1264d778c1ae5f25a83" title="Locks a mutex.">urosMutexLock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    ++poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a9a60232ccb071914c3da7ba1e7a8c164" title="Ready threads counter.">readyCnt</a>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="group__threading__funcs.html#gab5d4fcbed1f9cc5b5beca8e43425863e" title="Single condvar signal.">urosCondVarSignal</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#addddb07d8d701c89e4651309087c59d8" title="Ready threads condvar.">readyCond</a>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="group__threading__funcs.html#ga35dba778a18d8708fcf957da4e5110b3" title="Unlocks a mutex.">urosMutexUnlock</a>(&amp;poolp-&gt;<a class="code" href="struct_uros_thread_pool.html#a64720f647b8f982d1484c471703cf42d" title="Ready threads mutex.">readyMtx</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  } <span class="keywordflow">while</span> (!exit);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">/** @} */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">/*~~~ THREAD ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">/** @name Thread */</span><span class="comment"></span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">/** @{ */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"> * @brief   Gets the current thread identifier</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"> *          The current thread identifier.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gac9cffbf03bbc1ffdecc503571d63b1b1">  590</a></span>&#160;<a class="code" href="group__threading__types.html#ga7ea45613c0f64c5f99d32c7b2d829336" title="Thread ID type, platform-dependent.">UrosThreadId</a> <a class="code" href="group__threading__funcs.html#gac9cffbf03bbc1ffdecc503571d63b1b1" title="Gets the current thread identifier.">urosThreadSelf</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__threading__lld__funcs.html#gacf0a94072d8d44b1b1b3d115399d5054" title="Gets the current thread identifier.">uros_lld_thread_self</a>();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment"> * @brief   Gets the name of the thread.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"> * @param[in] id</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"> *          Thread identifier.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment"> *          Pointer to the name of the thread string, null-terminated.</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"> * @retval NULL</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"> *          No name assigned to the thread.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00605"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga57a724b5b38a2794b2c0c7e14f3ad409">  605</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__threading__funcs.html#ga57a724b5b38a2794b2c0c7e14f3ad409" title="Gets the name of the thread.">urosThreadGetName</a>(<a class="code" href="group__threading__types.html#ga7ea45613c0f64c5f99d32c7b2d829336" title="Thread ID type, platform-dependent.">UrosThreadId</a> <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__threading__lld__funcs.html#gad82d4e0210f14ec2ce1903be2bd8cd68" title="Gets the name of the thread.">uros_lld_thread_getname</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"> * @brief   Creates a thread with a static stack.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment"> * @details Creates a new thread. The memory chunk for the stack is externally</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"> *          declared, and is simply referenced. It is usually allocated as a</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"> *          static buffer.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"> * @pre     The stack is big enough to avoid stack overflow.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"> * @param[out] idp</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"> *          Pointer to the @p UrosThreadId where the created thread id is</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"> *          stored.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"> * @param[in] namep</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"> *          Pointer to the default thread name, valid for the whole the thread</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"> *          life. Null-terminated string.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"> * @param[in] priority</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"> *          Thread priority.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"> * @param[in] routine</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"> *          Thread routine, entry point of the thread program.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"> * @param[in] argp</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"> *          Argument passed to the thread routine. Can be @p NULL.</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment"> * @param[in] stackp</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"> *          Pointer to the externally allocated stack buffer.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment"> * @param[in] stacksize</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"> *          Stack size, in bytes.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga11f1b2995c20d144955f79b198ba3c33">  637</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#ga11f1b2995c20d144955f79b198ba3c33" title="Creates a thread with a static stack.">urosThreadCreateStatic</a>(<a class="code" href="group__threading__types.html#ga7ea45613c0f64c5f99d32c7b2d829336" title="Thread ID type, platform-dependent.">UrosThreadId</a> *idp, <span class="keyword">const</span> <span class="keywordtype">char</span> *namep,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                  <a class="code" href="group__threading__types.html#gabd3923d9ae9b7e8cc12dd6a3387bc736" title="Thread priority type, platform-dependent.">uros_prio_t</a> priority,</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                                  <a class="code" href="group__base__types.html#ga7f1ff17e59a50f61ce7e3c18fdae5306" title="One-parameter procedure function pointer.">uros_proc_f</a> routine, <span class="keywordtype">void</span> *argp,</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                                  <span class="keywordtype">void</span> *stackp, <span class="keywordtype">size_t</span> stacksize) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> err;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  err = <a class="code" href="group__threading__lld__funcs.html#gaed492ec7ee3d2ad892b8d779dc3505e1" title="Creates a thread with a static stack.">uros_lld_thread_createstatic</a>(idp, namep, priority,</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                                     routine, argp,</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                     stackp, stacksize);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <a class="code" href="group__base__macros.html#gae2617103c16f3e9d923d712289011471" title="Checks if an error occurred, and generates a message.">urosError</a>(err != <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>, <a class="code" href="group__base__macros.html#ga159478ffa2ebe6a29bda7446baa7c44a" title="No operation placeholder.">UROS_NOP</a>,</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            (<span class="stringliteral">&quot;Error %s while creating a new static thread\n&quot;</span>,</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;             <a class="code" href="group__base__funcs.html#gaffc66585c4773691fb36881ecf8bab2a" title="Text of an error code.">urosErrorText</a>(err)));</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"> * @brief   Creates a thread allocating the stack from a memory pool.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment"> * @details Creates a new thread. The memory chunk for the stack is allocated</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment"> *          from a memory pool.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"> * @warning The thread creation is suspended until there is a free slot in the</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment"> *          memory pool.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"> * @pre     The stack is big enough to avoid stack overflow.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment"> * @param[out] idp</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"> *          Pointer to the @p UrosThreadId where the created thread id is</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"> *          stored.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment"> * @param[in] namep</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"> *          Pointer to the default thread name, valid for the whole the thread</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"> *          life. Null-terminated string.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment"> * @param[in] priority</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"> *          Thread priority.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment"> * @param[in] routine</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment"> *          Thread routine, entry point of the thread program.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"> * @param[in] argp</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"> *          Argument passed to the thread routine. Can be @p NULL.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"> * @param[in] mempoolp</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">            Pointer to the memory pool where to allocate a stack.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00678"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga06b839f3199a979cbc5b64366506418e">  678</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#ga06b839f3199a979cbc5b64366506418e" title="Creates a thread allocating the stack from a memory pool.">urosThreadCreateFromMemPool</a>(<a class="code" href="group__threading__types.html#ga7ea45613c0f64c5f99d32c7b2d829336" title="Thread ID type, platform-dependent.">UrosThreadId</a> *idp, <span class="keyword">const</span> <span class="keywordtype">char</span> *namep,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                       <a class="code" href="group__threading__types.html#gabd3923d9ae9b7e8cc12dd6a3387bc736" title="Thread priority type, platform-dependent.">uros_prio_t</a> priority,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                       <a class="code" href="group__base__types.html#ga7f1ff17e59a50f61ce7e3c18fdae5306" title="One-parameter procedure function pointer.">uros_proc_f</a> routine, <span class="keywordtype">void</span> *argp,</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                       <a class="code" href="struct_uros_mem_pool.html" title="Built-in memory pool object.">UrosMemPool</a> *mempoolp) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> err;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  err = <a class="code" href="group__threading__lld__funcs.html#ga38bc24a6448115c50544133a79ac19dc" title="Creates a thread allocating the stack from a memory pool.">uros_lld_thread_createfrommempool</a>(idp, namep, priority,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                           routine, argp,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                           mempoolp);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <a class="code" href="group__base__macros.html#gae2617103c16f3e9d923d712289011471" title="Checks if an error occurred, and generates a message.">urosError</a>(err != <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>, <a class="code" href="group__base__macros.html#ga159478ffa2ebe6a29bda7446baa7c44a" title="No operation placeholder.">UROS_NOP</a>,</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            (<span class="stringliteral">&quot;Error %s while creating a new static thread\n&quot;</span>,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;             <a class="code" href="group__base__funcs.html#gaffc66585c4773691fb36881ecf8bab2a" title="Text of an error code.">urosErrorText</a>(err)));</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment"> * @brief   Creates a thread allocating the stack on the deafult heap.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment"> * @pre     The stack is big enough to avoid stack overflow.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"> * @param[out] idp</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"> *          Pointer to the @p UrosThreadId where the created thread id is</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment"> *          stored.</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment"> * @param[in] namep</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment"> *          Pointer to the default thread name, valid for the whole the thread</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"> *          life. Null-terminated string.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"> * @param[in] priority</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment"> *          Thread priority.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"> * @param[in] routine</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment"> *          Thread routine, entry point of the thread program.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"> * @param[in] argp</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"> *          Argument passed to the thread routine. Can be @p NULL.</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"> * @param[in] stacksize</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"> *          Stack size, in bytes.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga55879b0adf8eb2fc82113413a77e417c">  715</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#ga55879b0adf8eb2fc82113413a77e417c" title="Creates a thread allocating the stack on the deafult heap.">urosThreadCreateFromHeap</a>(<a class="code" href="group__threading__types.html#ga7ea45613c0f64c5f99d32c7b2d829336" title="Thread ID type, platform-dependent.">UrosThreadId</a> *idp, <span class="keyword">const</span> <span class="keywordtype">char</span> *namep,</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                    <a class="code" href="group__threading__types.html#gabd3923d9ae9b7e8cc12dd6a3387bc736" title="Thread priority type, platform-dependent.">uros_prio_t</a> priority,</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                                    <a class="code" href="group__base__types.html#ga7f1ff17e59a50f61ce7e3c18fdae5306" title="One-parameter procedure function pointer.">uros_proc_f</a> routine, <span class="keywordtype">void</span> *argp,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                    <span class="keywordtype">size_t</span> stacksize) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> err;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  err = <a class="code" href="group__threading__lld__funcs.html#ga220fa7bf10e2166e69cfde465706958a" title="Creates a thread allocating the stack on the deafult heap.">uros_lld_thread_createfromheap</a>(idp, namep, priority,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                        routine, argp,</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                        stacksize);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="group__base__macros.html#gae2617103c16f3e9d923d712289011471" title="Checks if an error occurred, and generates a message.">urosError</a>(err != <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>, <a class="code" href="group__base__macros.html#ga159478ffa2ebe6a29bda7446baa7c44a" title="No operation placeholder.">UROS_NOP</a>,</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            (<span class="stringliteral">&quot;Error %s while creating a new thread from the heap\n&quot;</span>,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;             <a class="code" href="group__base__funcs.html#gaffc66585c4773691fb36881ecf8bab2a" title="Text of an error code.">urosErrorText</a>(err)));</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> * @brief   Joins a thread.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"> * @details Waits until the required thread has exited, and releases its</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment"> *          allocated memory.</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment"> * @post    The required thread does not exist anymore.</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"> * @post    Any resources allocated by the thread creation are released (e.g.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment"> *          stack).</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment"> * @param[in] id</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"> *          Identifier of the thread being joined.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment"> *          Error code.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00744"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga0d51472a699f6790707980c71370af4d">  744</a></span>&#160;<a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> <a class="code" href="group__threading__funcs.html#ga0d51472a699f6790707980c71370af4d" title="Joins a thread.">urosThreadJoin</a>(<a class="code" href="group__threading__types.html#ga7ea45613c0f64c5f99d32c7b2d829336" title="Thread ID type, platform-dependent.">UrosThreadId</a> <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="group__base__types.html#gaac94ee32652dcb53686fdf6881996b6c" title="Error codes enumerator.">uros_err_t</a> err;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  err = <a class="code" href="group__threading__lld__funcs.html#gaeaab2d00b0344136eb1c84e877446ec2" title="Joins a thread.">uros_lld_thread_join</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <a class="code" href="group__base__macros.html#gae2617103c16f3e9d923d712289011471" title="Checks if an error occurred, and generates a message.">urosError</a>(err != <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>, <a class="code" href="group__base__macros.html#ga159478ffa2ebe6a29bda7446baa7c44a" title="No operation placeholder.">UROS_NOP</a>,</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            (<span class="stringliteral">&quot;Error %s while joining the thread %p\n&quot;</span>,</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;             <a class="code" href="group__base__funcs.html#gaffc66585c4773691fb36881ecf8bab2a" title="Text of an error code.">urosErrorText</a>(err), (uintptr_t)<span class="keywordtype">id</span>));</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__base__types.html#ggaac94ee32652dcb53686fdf6881996b6ca2aa45ad0fcc039cef995b754c97f63ce" title="No errors.">UROS_OK</a>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"> * @brief   Sleeps for some seconds.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"> * @details Puts the thread in sleep state for the provided amount of time.</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"> * @param[in] sec</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"> *          Number of seconds to sleep.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00761"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga7318f360a851795397bbf3da59839320">  761</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga7318f360a851795397bbf3da59839320" title="Sleeps for some seconds.">urosThreadSleepSec</a>(uint32_t sec) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  uros_lld_thread_sleepsec(sec);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment"> * @brief   Sleeps for some milliseconds.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment"> * @details Puts the thread in sleep state for the provided amount of time.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"> * @param[in] sec</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"> *          Number of milliseconds to sleep.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00773"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga6c7dae1f74ec4ad4f8cea207cc681c14">  773</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#ga6c7dae1f74ec4ad4f8cea207cc681c14" title="Sleeps for some milliseconds.">urosThreadSleepMsec</a>(uint32_t msec) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  uros_lld_thread_sleepmsec(msec);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;}</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"> * @brief   Sleeps for some microseconds.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"> * @details Puts the thread in sleep state for the provided amount of time.</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment"> * @param[in] sec</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment"> *          Number of microseconds to sleep.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00785"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#gac245ca48da149a1da1ac7481da40871b">  785</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__threading__funcs.html#gac245ca48da149a1da1ac7481da40871b" title="Sleeps for some microseconds.">urosThreadSleepUsec</a>(uint32_t usec) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  uros_lld_thread_sleepusec(usec);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"> * @brief   Current timestamp in milliseconds.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment"> * @note    The resolution is in milliseconds, but the precision may not be.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment"> *          The current timestamp, with a resolution of one millisecond.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00797"></a><span class="lineno"><a class="code" href="group__threading__funcs.html#ga7cf86830eaf12210a201e64e1273c9ce">  797</a></span>&#160;uint32_t <a class="code" href="group__threading__funcs.html#ga7cf86830eaf12210a201e64e1273c9ce" title="Current timestamp in milliseconds.">urosGetTimestampMsec</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">return</span> uros_lld_threading_gettimestampmsec();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">/** @} */</span><span class="comment"></span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">/** @} */</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      &copy; 2012 <a href="http://www.polimi.it">Politecnico di Milano</a>
      @ <a href="http://airlab.elet.polimi.it/">AIRLab</a>
      &#160;
      Generated by
      <a href="http://www.doxygen.org/index.html">
      <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2
    </li>
  </ul>
</div>
</body>
</html>
